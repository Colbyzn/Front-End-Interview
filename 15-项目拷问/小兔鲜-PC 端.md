# Front-End-Interview::15-é¡¹ç›®æ‹·é—®::å°å…”é²œ-PC ç«¯

## å°å…”é²œ PC ç«¯é¡¹ç›®ä¸­ï¼Œå¦‚ä½•å¯¹é¦–å±è¿›è¡Œä¼˜åŒ–ï¼Ÿ

ğŸ“¢ å‚è€ƒç­”æ¡ˆï¼š

è¯¥é¡¹ç›®é‡‡ç”¨**è·¯ç”±æ‡’åŠ è½½**å’Œ**å›¾ç‰‡æ‡’åŠ è½½**è¿™ä¸¤ç§æ–¹å¼å¯¹é¦–å±è¿›è¡Œä¼˜åŒ–

1. è·¯ç”±æ‡’åŠ è½½
   ä½¿ç”¨ **import()** è¯­æ³•æ¥å¯¼å…¥ä¸é¦–é¡µæ— å…³çš„è·¯ç”±ç»„ä»¶ï¼Œå®ç°è·¯ç”±æ‡’åŠ è½½
2. å›¾ç‰‡æ‡’åŠ è½½
   **å°è£…è‡ªå®šä¹‰æŒ‡ä»¤** v-img-lazyï¼Œå…¶å†…éƒ¨é€»è¾‘æ˜¯ä½¿ç”¨ VueUse æ’ä»¶å†…çš„ **useIntersectionObserver()** æ–¹æ³•æ¥**ç›‘å¬ç›®æ ‡å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºå†…**ï¼Œå½“å‡ºç°åœ¨å¯è§†åŒºå†…æ—¶ï¼Œå°±**å°†çœŸå® url èµ‹å€¼ç»™å›¾ç‰‡å…ƒç´ çš„ src å±æ€§**

## å›ç­”é¡¹ç›®éš¾ç‚¹çš„æ¨¡ç‰ˆ/å¥—è·¯

ğŸ“¢ å‚è€ƒç­”æ¡ˆï¼š

1. æè¿°é—®é¢˜:
   ä¾‹å¦‚ï¼Œ**ä»€ä¹ˆèƒŒæ™¯ + ä»€ä¹ˆç°è±¡ + é€ æˆä»€ä¹ˆå½±å“**
2. é—®é¢˜å¦‚ä½•è¢«è§£å†³ï¼š
   ä¾‹å¦‚ï¼Œ**åˆ†ææ€è·¯ + è§£å†³æ–¹æ¡ˆ**
3. è‡ªå·±çš„æˆé•¿ï¼š
   **å­¦åˆ°äº†ä»€ä¹ˆ + ä»¥åå¦‚ä½•é¿å…**

ç¤ºä¾‹å¦‚ä¸‹ï¼š

- é—®é¢˜ï¼šç¼–è¾‘å™¨åªèƒ½å›æ˜¾ JSON æ ¼å¼ï¼Œè€Œä¸æ”¯æŒè€ç‰ˆæœ¬çš„ HTML æ ¼å¼
- è§£å†³ï¼šå°† HTML è½¬æ¢ä¸º JSON æ•°æ®ï¼Œå³å¯è§£å†³è¿™ä¸ªé—®é¢˜
- æˆé•¿ï¼šè¦è€ƒè™‘å®Œæ•´çš„è¾“å…¥è¾“å‡º + è€ƒè™‘æ—§ç‰ˆæœ¬ç”¨æˆ· + å‚è€ƒå…¶ä»–äº§å“

## é¡¹ç›®ä¸­é‡åˆ°è¿‡å“ªäº›éš¾ç‚¹ï¼Œå¦‚ä½•è§£å†³çš„ï¼Ÿ

ğŸ“¢ å‚è€ƒç­”æ¡ˆï¼š

1. å°è£…å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤é€»è¾‘ä»£ç æ—¶ï¼Œå¿˜è®°è°ƒç”¨ stop() æ–¹æ³•æš‚åœç›‘å¬å…ƒç´ 
   åœ¨å°†çœŸå® url èµ‹å€¼ç»™å›¾ç‰‡å…ƒç´ çš„ src å±æ€§åï¼Œå°±åº”è¯¥æš‚å®šè°ƒç”¨ useIntersectionObserver() æ–¹æ³•æ¥ç›‘å¬ç›®æ ‡å…ƒç´ ï¼Œ**å¦åˆ™ç›®æ ‡å…ƒç´ åœ¨å¯è§†åŒºå†…çš„æ¯æ¬¡æ»šåŠ¨éƒ½ä¼šè§¦å‘è¯¥æ–¹æ³•ï¼Œé€ æˆä¸å¿…è¦çš„æ€§èƒ½å¼€é”€**

   ```javascript
   import { useIntersectionObserver } from '@vueuse/core';

   const directivePlugin = {
     install(app) {
       app.directive('img-lazy', {
         mounted(el, binding) {
           const { stop } = useIntersectionObserver(
             el,
             ([{ isIntersecting }]) => {
               if (isIntersecting) {
                 el.src = binding.value;
                 // è°ƒç”¨ stop()ï¼Œæš‚å®šç›‘å¬
                 stop();
               }
             }
           );
         },
       });
     },
   };

   export default directivePlugin;
   ```
